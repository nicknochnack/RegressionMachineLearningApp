{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n/**\n * Copyright IBM Corp. 2016, 2018\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nimport settings from '../../globals/js/settings';\nimport mixin from '../../globals/js/misc/mixin';\nimport createComponent from '../../globals/js/mixins/create-component';\nimport initComponentBySearch from '../../globals/js/mixins/init-component-by-search';\nimport eventedState from '../../globals/js/mixins/evented-state';\nimport handles from '../../globals/js/mixins/handles';\nimport eventMatches from '../../globals/js/misc/event-matches';\nimport on from '../../globals/js/misc/on';\n\nvar toArray = function toArray(arrayLike) {\n  return Array.prototype.slice.call(arrayLike);\n};\n\nvar DataTable = /*#__PURE__*/function (_mixin) {\n  _inherits(DataTable, _mixin);\n\n  var _super = _createSuper(DataTable);\n  /**\n   * Data Table\n   * @extends CreateComponent\n   * @extends InitComponentBySearch\n   * @extends   EventedState\n   * @param {HTMLElement} element The root element of tables\n   * @param {object} [options] the... options\n   * @param {string} [options.selectorInit] selector initialization\n   * @param {string} [options.selectorExpandCells] css selector for expand\n   * @param {string} [options.expandableRow] css selector for expand\n   * @param {string} [options.selectorParentRows] css selector for rows housing expansion\n   * @param {string} [options.selectorTableBody] root css for table body\n   * @param {string} [options.eventTrigger] selector for event bubble capture points\n   * @param {string} [options.eventParentContainer] used find the bubble container\n   */\n\n\n  function DataTable(_element, options) {\n    var _this;\n\n    _classCallCheck(this, DataTable);\n\n    _this = _super.call(this, _element, options);\n\n    _this._sortToggle = function (detail) {\n      var element = detail.element,\n          previousValue = detail.previousValue;\n      toArray(_this.tableHeaders).forEach(function (header) {\n        var sortEl = header.querySelector(_this.options.selectorTableSort);\n\n        if (sortEl !== null && sortEl !== element) {\n          sortEl.classList.remove(_this.options.classTableSortActive);\n          sortEl.classList.remove(_this.options.classTableSortAscending);\n        }\n      });\n\n      if (!previousValue) {\n        element.dataset.previousValue = 'ascending';\n        element.classList.add(_this.options.classTableSortActive);\n        element.classList.add(_this.options.classTableSortAscending);\n      } else if (previousValue === 'ascending') {\n        element.dataset.previousValue = 'descending';\n        element.classList.add(_this.options.classTableSortActive);\n        element.classList.remove(_this.options.classTableSortAscending);\n      } else if (previousValue === 'descending') {\n        element.removeAttribute('data-previous-value');\n        element.classList.remove(_this.options.classTableSortActive);\n        element.classList.remove(_this.options.classTableSortAscending);\n      }\n    };\n\n    _this._selectToggle = function (detail) {\n      var element = detail.element;\n      var checked = element.checked; // increment the  count\n\n      _this.state.checkboxCount += checked ? 1 : -1;\n      _this.countEl.textContent = _this.state.checkboxCount;\n      var row = element.parentNode.parentNode;\n      row.classList.toggle(_this.options.classTableSelected); // toggle on/off batch action bar\n\n      _this._actionBarToggle(_this.state.checkboxCount > 0);\n    };\n\n    _this._selectAllToggle = function (_ref) {\n      var element = _ref.element;\n      var checked = element.checked;\n      var inputs = toArray(_this.element.querySelectorAll(_this.options.selectorCheckbox));\n      _this.state.checkboxCount = checked ? inputs.length - 1 : 0;\n      inputs.forEach(function (item) {\n        item.checked = checked;\n        var row = item.parentNode.parentNode;\n\n        if (checked && row) {\n          row.classList.add(_this.options.classTableSelected);\n        } else {\n          row.classList.remove(_this.options.classTableSelected);\n        }\n      });\n\n      _this._actionBarToggle(_this.state.checkboxCount > 0);\n\n      if (_this.batchActionEl) {\n        _this.countEl.textContent = _this.state.checkboxCount;\n      }\n    };\n\n    _this._actionBarCancel = function () {\n      var inputs = toArray(_this.element.querySelectorAll(_this.options.selectorCheckbox));\n      var row = toArray(_this.element.querySelectorAll(_this.options.selectorTableSelected));\n      row.forEach(function (item) {\n        item.classList.remove(_this.options.classTableSelected);\n      });\n      inputs.forEach(function (item) {\n        item.checked = false;\n      });\n      _this.state.checkboxCount = 0;\n\n      _this._actionBarToggle(false);\n\n      if (_this.batchActionEl) {\n        _this.countEl.textContent = _this.state.checkboxCount;\n      }\n    };\n\n    _this._actionBarToggle = function (toggleOn) {\n      var handleTransitionEnd;\n\n      var transition = function transition(evt) {\n        if (handleTransitionEnd) {\n          handleTransitionEnd = _this.unmanage(handleTransitionEnd).release();\n        }\n\n        if (evt.target.matches(_this.options.selectorActions)) {\n          if (_this.batchActionEl.dataset.active === 'false') {\n            _this.batchActionEl.setAttribute('tabIndex', -1);\n          } else {\n            _this.batchActionEl.setAttribute('tabIndex', 0);\n          }\n        }\n      };\n\n      if (toggleOn) {\n        _this.batchActionEl.dataset.active = true;\n\n        _this.batchActionEl.classList.add(_this.options.classActionBarActive);\n      } else if (_this.batchActionEl) {\n        _this.batchActionEl.dataset.active = false;\n\n        _this.batchActionEl.classList.remove(_this.options.classActionBarActive);\n      }\n\n      if (_this.batchActionEl) {\n        handleTransitionEnd = _this.manage(on(_this.batchActionEl, 'transitionend', transition));\n      }\n    };\n\n    _this._rowExpandToggle = function (_ref2) {\n      var element = _ref2.element,\n          forceExpand = _ref2.forceExpand;\n      var parent = element.closest(_this.options.eventParentContainer); // NOTE: `data-previous-value` keeps UI state before this method makes change in style\n      // eslint-disable-next-line eqeqeq\n\n      var shouldExpand = forceExpand != null ? forceExpand : element.dataset.previousValue === undefined || element.dataset.previousValue === 'expanded';\n\n      if (shouldExpand) {\n        element.dataset.previousValue = 'collapsed';\n        parent.classList.add(_this.options.classExpandableRow);\n      } else {\n        parent.classList.remove(_this.options.classExpandableRow);\n        element.dataset.previousValue = 'expanded';\n\n        var expandHeader = _this.element.querySelector(_this.options.selectorExpandHeader);\n\n        if (expandHeader) {\n          expandHeader.dataset.previousValue = 'expanded';\n        }\n      }\n    };\n\n    _this._rowExpandToggleAll = function (_ref3) {\n      var element = _ref3.element; // NOTE: `data-previous-value` keeps UI state before this method makes change in style\n\n      var shouldExpand = element.dataset.previousValue === undefined || element.dataset.previousValue === 'expanded';\n      element.dataset.previousValue = shouldExpand ? 'collapsed' : 'expanded';\n\n      var expandCells = _this.element.querySelectorAll(_this.options.selectorExpandCells);\n\n      Array.prototype.forEach.call(expandCells, function (cell) {\n        _this._rowExpandToggle({\n          element: cell,\n          forceExpand: shouldExpand\n        });\n      });\n    };\n\n    _this._expandableHoverToggle = function (evt) {\n      var element = eventMatches(evt, _this.options.selectorChildRow);\n\n      if (element) {\n        element.previousElementSibling.classList.toggle(_this.options.classExpandableRowHover, evt.type === 'mouseover');\n      }\n    };\n\n    _this._toggleState = function (element, evt) {\n      var data = element.dataset;\n      var label = data.label ? data.label : '';\n      var previousValue = data.previousValue ? data.previousValue : '';\n      var initialEvt = evt;\n\n      _this.changeState({\n        group: data.event,\n        element: element,\n        label: label,\n        previousValue: previousValue,\n        initialEvt: initialEvt\n      });\n    };\n\n    _this._keydownHandler = function (evt) {\n      var searchContainer = _this.element.querySelector(_this.options.selectorToolbarSearchContainer);\n\n      var searchEvent = eventMatches(evt, _this.options.selectorSearchMagnifier);\n      var activeSearch = searchContainer.classList.contains(_this.options.classToolbarSearchActive);\n\n      if (evt.which === 27) {\n        _this._actionBarCancel();\n      }\n\n      if (searchContainer && searchEvent && evt.which === 13) {\n        _this.activateSearch(searchContainer);\n      }\n\n      if (activeSearch && evt.which === 27) {\n        _this.deactivateSearch(searchContainer, evt);\n      }\n    };\n\n    _this.refreshRows = function () {\n      var newExpandCells = toArray(_this.element.querySelectorAll(_this.options.selectorExpandCells));\n      var newExpandableRows = toArray(_this.element.querySelectorAll(_this.options.selectorExpandableRows));\n      var newParentRows = toArray(_this.element.querySelectorAll(_this.options.selectorParentRows)); // check if this is a refresh or the first time\n\n      if (_this.parentRows.length > 0) {\n        var diffParentRows = newParentRows.filter(function (newRow) {\n          return !_this.parentRows.some(function (oldRow) {\n            return oldRow === newRow;\n          });\n        }); // check if there are expandable rows\n\n        if (newExpandableRows.length > 0) {\n          var diffExpandableRows = diffParentRows.map(function (newRow) {\n            return newRow.nextElementSibling;\n          });\n          var mergedExpandableRows = [].concat(_toConsumableArray(toArray(_this.expandableRows)), _toConsumableArray(toArray(diffExpandableRows)));\n          _this.expandableRows = mergedExpandableRows;\n        }\n      } else if (newExpandableRows.length > 0) {\n        _this.expandableRows = newExpandableRows;\n      }\n\n      _this.expandCells = newExpandCells;\n      _this.parentRows = newParentRows;\n    };\n\n    _this.container = _element.parentNode;\n    _this.toolbarEl = _this.element.querySelector(_this.options.selectorToolbar);\n    _this.batchActionEl = _this.element.querySelector(_this.options.selectorActions);\n    _this.countEl = _this.element.querySelector(_this.options.selectorCount);\n    _this.cancelEl = _this.element.querySelector(_this.options.selectorActionCancel);\n    _this.tableHeaders = _this.element.querySelectorAll('th');\n    _this.tableBody = _this.element.querySelector(_this.options.selectorTableBody);\n    _this.expandCells = [];\n    _this.expandableRows = [];\n    _this.parentRows = [];\n\n    _this.refreshRows();\n\n    _this.manage(on(_this.element, 'mouseover', _this._expandableHoverToggle));\n\n    _this.manage(on(_this.element, 'mouseout', _this._expandableHoverToggle));\n\n    _this.manage(on(_this.element, 'click', function (evt) {\n      var eventElement = eventMatches(evt, _this.options.eventTrigger);\n\n      var searchContainer = _this.element.querySelector(_this.options.selectorToolbarSearchContainer);\n\n      if (eventElement) {\n        _this._toggleState(eventElement, evt);\n      }\n\n      if (searchContainer) {\n        _this._handleDocumentClick(evt);\n      }\n    }));\n\n    _this.manage(on(_this.element, 'keydown', _this._keydownHandler));\n\n    _this.state = {\n      checkboxCount: 0\n    };\n    return _this;\n  }\n\n  _createClass(DataTable, [{\n    key: \"_handleDocumentClick\",\n    value: function _handleDocumentClick(evt) {\n      var searchContainer = this.element.querySelector(this.options.selectorToolbarSearchContainer);\n      var searchEvent = eventMatches(evt, this.options.selectorSearchMagnifier);\n      var activeSearch = searchContainer.classList.contains(this.options.classToolbarSearchActive);\n\n      if (searchContainer && searchEvent) {\n        this.activateSearch(searchContainer);\n      }\n\n      if (activeSearch) {\n        this.deactivateSearch(searchContainer, evt);\n      }\n    }\n  }, {\n    key: \"activateSearch\",\n    value: function activateSearch(container) {\n      var input = container.querySelector(this.options.selectorSearchInput);\n      container.classList.add(this.options.classToolbarSearchActive);\n      input.focus();\n    }\n  }, {\n    key: \"deactivateSearch\",\n    value: function deactivateSearch(container, evt) {\n      var trigger = container.querySelector(this.options.selectorSearchMagnifier);\n      var input = container.querySelector(this.options.selectorSearchInput);\n      var svg = trigger.querySelector('svg');\n\n      if (input.value.length === 0 && evt.target !== input && evt.target !== trigger && evt.target !== svg) {\n        container.classList.remove(this.options.classToolbarSearchActive);\n        trigger.focus();\n      }\n\n      if (evt.which === 27 && evt.target === input) {\n        container.classList.remove(this.options.classToolbarSearchActive);\n        trigger.focus();\n      }\n    }\n  }, {\n    key: \"_changeState\",\n    value: function _changeState(detail, callback) {\n      this[this.constructor.eventHandlers[detail.group]](detail);\n      callback();\n    }\n  }], [{\n    key: \"options\",\n    get: function get() {\n      var prefix = settings.prefix;\n      return {\n        selectorInit: \"[data-table]\",\n        selectorToolbar: \".\".concat(prefix, \"--table--toolbar\"),\n        selectorActions: \".\".concat(prefix, \"--batch-actions\"),\n        selectorCount: '[data-items-selected]',\n        selectorActionCancel: \".\".concat(prefix, \"--batch-summary__cancel\"),\n        selectorCheckbox: \".\".concat(prefix, \"--checkbox\"),\n        selectorExpandHeader: \"th.\".concat(prefix, \"--table-expand\"),\n        selectorExpandCells: \"td.\".concat(prefix, \"--table-expand\"),\n        selectorExpandableRows: \".\".concat(prefix, \"--expandable-row\"),\n        selectorParentRows: \".\".concat(prefix, \"--parent-row\"),\n        selectorChildRow: '[data-child-row]',\n        selectorTableBody: 'tbody',\n        selectorTableSort: \".\".concat(prefix, \"--table-sort\"),\n        selectorTableSelected: \".\".concat(prefix, \"--data-table--selected\"),\n        selectorToolbarSearchContainer: \".\".concat(prefix, \"--toolbar-search-container-expandable\"),\n        selectorSearchMagnifier: \".\".concat(prefix, \"--search-magnifier\"),\n        selectorSearchInput: \".\".concat(prefix, \"--search-input\"),\n        classExpandableRow: \"\".concat(prefix, \"--expandable-row\"),\n        classExpandableRowHidden: \"\".concat(prefix, \"--expandable-row--hidden\"),\n        classExpandableRowHover: \"\".concat(prefix, \"--expandable-row--hover\"),\n        classTableSortAscending: \"\".concat(prefix, \"--table-sort--ascending\"),\n        classTableSortActive: \"\".concat(prefix, \"--table-sort--active\"),\n        classToolbarSearchActive: \"\".concat(prefix, \"--toolbar-search-container-active\"),\n        classActionBarActive: \"\".concat(prefix, \"--batch-actions--active\"),\n        classTableSelected: \"\".concat(prefix, \"--data-table--selected\"),\n        eventBeforeExpand: \"data-table-beforetoggleexpand\",\n        eventAfterExpand: \"data-table-aftertoggleexpand\",\n        eventBeforeExpandAll: \"data-table-beforetoggleexpandall\",\n        eventAfterExpandAll: \"data-table-aftertoggleexpandall\",\n        eventBeforeSort: \"data-table-beforetogglesort\",\n        eventAfterSort: \"data-table-aftertogglesort\",\n        eventTrigger: '[data-event]',\n        eventParentContainer: '[data-parent-row]'\n      };\n    }\n  }]);\n\n  DataTable.components = new WeakMap();\n  DataTable.eventHandlers = {\n    expand: '_rowExpandToggle',\n    expandAll: '_rowExpandToggleAll',\n    sort: '_sortToggle',\n    select: '_selectToggle',\n    'select-all': '_selectAllToggle',\n    'action-bar-cancel': '_actionBarCancel'\n  };\n  return DataTable;\n}(mixin(createComponent, initComponentBySearch, eventedState, handles));\n\nexport default DataTable;","map":{"version":3,"sources":["/Users/nicholasrenotte/Desktop/Regression/app/client/node_modules/carbon-components/es/components/data-table/data-table.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","toString","call","slice","name","Array","from","test","iter","isArray","len","length","i","arr2","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","value","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","e","getPrototypeOf","settings","mixin","createComponent","initComponentBySearch","eventedState","handles","eventMatches","on","toArray","arrayLike","DataTable","_mixin","_super","_element","options","_this","_sortToggle","detail","element","previousValue","tableHeaders","forEach","header","sortEl","querySelector","selectorTableSort","classList","remove","classTableSortActive","classTableSortAscending","dataset","add","removeAttribute","_selectToggle","checked","state","checkboxCount","countEl","textContent","row","parentNode","toggle","classTableSelected","_actionBarToggle","_selectAllToggle","_ref","inputs","querySelectorAll","selectorCheckbox","item","batchActionEl","_actionBarCancel","selectorTableSelected","toggleOn","handleTransitionEnd","transition","evt","unmanage","release","matches","selectorActions","active","setAttribute","classActionBarActive","manage","_rowExpandToggle","_ref2","forceExpand","parent","closest","eventParentContainer","shouldExpand","undefined","classExpandableRow","expandHeader","selectorExpandHeader","_rowExpandToggleAll","_ref3","expandCells","selectorExpandCells","cell","_expandableHoverToggle","selectorChildRow","previousElementSibling","classExpandableRowHover","type","_toggleState","data","label","initialEvt","changeState","group","event","_keydownHandler","searchContainer","selectorToolbarSearchContainer","searchEvent","selectorSearchMagnifier","activeSearch","contains","classToolbarSearchActive","which","activateSearch","deactivateSearch","refreshRows","newExpandCells","newExpandableRows","selectorExpandableRows","newParentRows","selectorParentRows","parentRows","diffParentRows","filter","newRow","some","oldRow","diffExpandableRows","map","nextElementSibling","mergedExpandableRows","concat","expandableRows","container","toolbarEl","selectorToolbar","selectorCount","cancelEl","selectorActionCancel","tableBody","selectorTableBody","eventElement","eventTrigger","_handleDocumentClick","input","selectorSearchInput","focus","trigger","svg","_changeState","callback","eventHandlers","get","prefix","selectorInit","classExpandableRowHidden","eventBeforeExpand","eventAfterExpand","eventBeforeExpandAll","eventAfterExpandAll","eventBeforeSort","eventAfterSort","components","WeakMap","expand","expandAll","sort","select"],"mappings":"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","sourcesContent":["function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n/**\n * Copyright IBM Corp. 2016, 2018\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nimport settings from '../../globals/js/settings';\nimport mixin from '../../globals/js/misc/mixin';\nimport createComponent from '../../globals/js/mixins/create-component';\nimport initComponentBySearch from '../../globals/js/mixins/init-component-by-search';\nimport eventedState from '../../globals/js/mixins/evented-state';\nimport handles from '../../globals/js/mixins/handles';\nimport eventMatches from '../../globals/js/misc/event-matches';\nimport on from '../../globals/js/misc/on';\n\nvar toArray = function toArray(arrayLike) {\n  return Array.prototype.slice.call(arrayLike);\n};\n\nvar DataTable = /*#__PURE__*/function (_mixin) {\n  _inherits(DataTable, _mixin);\n\n  var _super = _createSuper(DataTable);\n  /**\n   * Data Table\n   * @extends CreateComponent\n   * @extends InitComponentBySearch\n   * @extends   EventedState\n   * @param {HTMLElement} element The root element of tables\n   * @param {object} [options] the... options\n   * @param {string} [options.selectorInit] selector initialization\n   * @param {string} [options.selectorExpandCells] css selector for expand\n   * @param {string} [options.expandableRow] css selector for expand\n   * @param {string} [options.selectorParentRows] css selector for rows housing expansion\n   * @param {string} [options.selectorTableBody] root css for table body\n   * @param {string} [options.eventTrigger] selector for event bubble capture points\n   * @param {string} [options.eventParentContainer] used find the bubble container\n   */\n\n\n  function DataTable(_element, options) {\n    var _this;\n\n    _classCallCheck(this, DataTable);\n\n    _this = _super.call(this, _element, options);\n\n    _this._sortToggle = function (detail) {\n      var element = detail.element,\n          previousValue = detail.previousValue;\n      toArray(_this.tableHeaders).forEach(function (header) {\n        var sortEl = header.querySelector(_this.options.selectorTableSort);\n\n        if (sortEl !== null && sortEl !== element) {\n          sortEl.classList.remove(_this.options.classTableSortActive);\n          sortEl.classList.remove(_this.options.classTableSortAscending);\n        }\n      });\n\n      if (!previousValue) {\n        element.dataset.previousValue = 'ascending';\n        element.classList.add(_this.options.classTableSortActive);\n        element.classList.add(_this.options.classTableSortAscending);\n      } else if (previousValue === 'ascending') {\n        element.dataset.previousValue = 'descending';\n        element.classList.add(_this.options.classTableSortActive);\n        element.classList.remove(_this.options.classTableSortAscending);\n      } else if (previousValue === 'descending') {\n        element.removeAttribute('data-previous-value');\n        element.classList.remove(_this.options.classTableSortActive);\n        element.classList.remove(_this.options.classTableSortAscending);\n      }\n    };\n\n    _this._selectToggle = function (detail) {\n      var element = detail.element;\n      var checked = element.checked; // increment the  count\n\n      _this.state.checkboxCount += checked ? 1 : -1;\n      _this.countEl.textContent = _this.state.checkboxCount;\n      var row = element.parentNode.parentNode;\n      row.classList.toggle(_this.options.classTableSelected); // toggle on/off batch action bar\n\n      _this._actionBarToggle(_this.state.checkboxCount > 0);\n    };\n\n    _this._selectAllToggle = function (_ref) {\n      var element = _ref.element;\n      var checked = element.checked;\n      var inputs = toArray(_this.element.querySelectorAll(_this.options.selectorCheckbox));\n      _this.state.checkboxCount = checked ? inputs.length - 1 : 0;\n      inputs.forEach(function (item) {\n        item.checked = checked;\n        var row = item.parentNode.parentNode;\n\n        if (checked && row) {\n          row.classList.add(_this.options.classTableSelected);\n        } else {\n          row.classList.remove(_this.options.classTableSelected);\n        }\n      });\n\n      _this._actionBarToggle(_this.state.checkboxCount > 0);\n\n      if (_this.batchActionEl) {\n        _this.countEl.textContent = _this.state.checkboxCount;\n      }\n    };\n\n    _this._actionBarCancel = function () {\n      var inputs = toArray(_this.element.querySelectorAll(_this.options.selectorCheckbox));\n      var row = toArray(_this.element.querySelectorAll(_this.options.selectorTableSelected));\n      row.forEach(function (item) {\n        item.classList.remove(_this.options.classTableSelected);\n      });\n      inputs.forEach(function (item) {\n        item.checked = false;\n      });\n      _this.state.checkboxCount = 0;\n\n      _this._actionBarToggle(false);\n\n      if (_this.batchActionEl) {\n        _this.countEl.textContent = _this.state.checkboxCount;\n      }\n    };\n\n    _this._actionBarToggle = function (toggleOn) {\n      var handleTransitionEnd;\n\n      var transition = function transition(evt) {\n        if (handleTransitionEnd) {\n          handleTransitionEnd = _this.unmanage(handleTransitionEnd).release();\n        }\n\n        if (evt.target.matches(_this.options.selectorActions)) {\n          if (_this.batchActionEl.dataset.active === 'false') {\n            _this.batchActionEl.setAttribute('tabIndex', -1);\n          } else {\n            _this.batchActionEl.setAttribute('tabIndex', 0);\n          }\n        }\n      };\n\n      if (toggleOn) {\n        _this.batchActionEl.dataset.active = true;\n\n        _this.batchActionEl.classList.add(_this.options.classActionBarActive);\n      } else if (_this.batchActionEl) {\n        _this.batchActionEl.dataset.active = false;\n\n        _this.batchActionEl.classList.remove(_this.options.classActionBarActive);\n      }\n\n      if (_this.batchActionEl) {\n        handleTransitionEnd = _this.manage(on(_this.batchActionEl, 'transitionend', transition));\n      }\n    };\n\n    _this._rowExpandToggle = function (_ref2) {\n      var element = _ref2.element,\n          forceExpand = _ref2.forceExpand;\n      var parent = element.closest(_this.options.eventParentContainer); // NOTE: `data-previous-value` keeps UI state before this method makes change in style\n      // eslint-disable-next-line eqeqeq\n\n      var shouldExpand = forceExpand != null ? forceExpand : element.dataset.previousValue === undefined || element.dataset.previousValue === 'expanded';\n\n      if (shouldExpand) {\n        element.dataset.previousValue = 'collapsed';\n        parent.classList.add(_this.options.classExpandableRow);\n      } else {\n        parent.classList.remove(_this.options.classExpandableRow);\n        element.dataset.previousValue = 'expanded';\n\n        var expandHeader = _this.element.querySelector(_this.options.selectorExpandHeader);\n\n        if (expandHeader) {\n          expandHeader.dataset.previousValue = 'expanded';\n        }\n      }\n    };\n\n    _this._rowExpandToggleAll = function (_ref3) {\n      var element = _ref3.element; // NOTE: `data-previous-value` keeps UI state before this method makes change in style\n\n      var shouldExpand = element.dataset.previousValue === undefined || element.dataset.previousValue === 'expanded';\n      element.dataset.previousValue = shouldExpand ? 'collapsed' : 'expanded';\n\n      var expandCells = _this.element.querySelectorAll(_this.options.selectorExpandCells);\n\n      Array.prototype.forEach.call(expandCells, function (cell) {\n        _this._rowExpandToggle({\n          element: cell,\n          forceExpand: shouldExpand\n        });\n      });\n    };\n\n    _this._expandableHoverToggle = function (evt) {\n      var element = eventMatches(evt, _this.options.selectorChildRow);\n\n      if (element) {\n        element.previousElementSibling.classList.toggle(_this.options.classExpandableRowHover, evt.type === 'mouseover');\n      }\n    };\n\n    _this._toggleState = function (element, evt) {\n      var data = element.dataset;\n      var label = data.label ? data.label : '';\n      var previousValue = data.previousValue ? data.previousValue : '';\n      var initialEvt = evt;\n\n      _this.changeState({\n        group: data.event,\n        element: element,\n        label: label,\n        previousValue: previousValue,\n        initialEvt: initialEvt\n      });\n    };\n\n    _this._keydownHandler = function (evt) {\n      var searchContainer = _this.element.querySelector(_this.options.selectorToolbarSearchContainer);\n\n      var searchEvent = eventMatches(evt, _this.options.selectorSearchMagnifier);\n      var activeSearch = searchContainer.classList.contains(_this.options.classToolbarSearchActive);\n\n      if (evt.which === 27) {\n        _this._actionBarCancel();\n      }\n\n      if (searchContainer && searchEvent && evt.which === 13) {\n        _this.activateSearch(searchContainer);\n      }\n\n      if (activeSearch && evt.which === 27) {\n        _this.deactivateSearch(searchContainer, evt);\n      }\n    };\n\n    _this.refreshRows = function () {\n      var newExpandCells = toArray(_this.element.querySelectorAll(_this.options.selectorExpandCells));\n      var newExpandableRows = toArray(_this.element.querySelectorAll(_this.options.selectorExpandableRows));\n      var newParentRows = toArray(_this.element.querySelectorAll(_this.options.selectorParentRows)); // check if this is a refresh or the first time\n\n      if (_this.parentRows.length > 0) {\n        var diffParentRows = newParentRows.filter(function (newRow) {\n          return !_this.parentRows.some(function (oldRow) {\n            return oldRow === newRow;\n          });\n        }); // check if there are expandable rows\n\n        if (newExpandableRows.length > 0) {\n          var diffExpandableRows = diffParentRows.map(function (newRow) {\n            return newRow.nextElementSibling;\n          });\n          var mergedExpandableRows = [].concat(_toConsumableArray(toArray(_this.expandableRows)), _toConsumableArray(toArray(diffExpandableRows)));\n          _this.expandableRows = mergedExpandableRows;\n        }\n      } else if (newExpandableRows.length > 0) {\n        _this.expandableRows = newExpandableRows;\n      }\n\n      _this.expandCells = newExpandCells;\n      _this.parentRows = newParentRows;\n    };\n\n    _this.container = _element.parentNode;\n    _this.toolbarEl = _this.element.querySelector(_this.options.selectorToolbar);\n    _this.batchActionEl = _this.element.querySelector(_this.options.selectorActions);\n    _this.countEl = _this.element.querySelector(_this.options.selectorCount);\n    _this.cancelEl = _this.element.querySelector(_this.options.selectorActionCancel);\n    _this.tableHeaders = _this.element.querySelectorAll('th');\n    _this.tableBody = _this.element.querySelector(_this.options.selectorTableBody);\n    _this.expandCells = [];\n    _this.expandableRows = [];\n    _this.parentRows = [];\n\n    _this.refreshRows();\n\n    _this.manage(on(_this.element, 'mouseover', _this._expandableHoverToggle));\n\n    _this.manage(on(_this.element, 'mouseout', _this._expandableHoverToggle));\n\n    _this.manage(on(_this.element, 'click', function (evt) {\n      var eventElement = eventMatches(evt, _this.options.eventTrigger);\n\n      var searchContainer = _this.element.querySelector(_this.options.selectorToolbarSearchContainer);\n\n      if (eventElement) {\n        _this._toggleState(eventElement, evt);\n      }\n\n      if (searchContainer) {\n        _this._handleDocumentClick(evt);\n      }\n    }));\n\n    _this.manage(on(_this.element, 'keydown', _this._keydownHandler));\n\n    _this.state = {\n      checkboxCount: 0\n    };\n    return _this;\n  }\n\n  _createClass(DataTable, [{\n    key: \"_handleDocumentClick\",\n    value: function _handleDocumentClick(evt) {\n      var searchContainer = this.element.querySelector(this.options.selectorToolbarSearchContainer);\n      var searchEvent = eventMatches(evt, this.options.selectorSearchMagnifier);\n      var activeSearch = searchContainer.classList.contains(this.options.classToolbarSearchActive);\n\n      if (searchContainer && searchEvent) {\n        this.activateSearch(searchContainer);\n      }\n\n      if (activeSearch) {\n        this.deactivateSearch(searchContainer, evt);\n      }\n    }\n  }, {\n    key: \"activateSearch\",\n    value: function activateSearch(container) {\n      var input = container.querySelector(this.options.selectorSearchInput);\n      container.classList.add(this.options.classToolbarSearchActive);\n      input.focus();\n    }\n  }, {\n    key: \"deactivateSearch\",\n    value: function deactivateSearch(container, evt) {\n      var trigger = container.querySelector(this.options.selectorSearchMagnifier);\n      var input = container.querySelector(this.options.selectorSearchInput);\n      var svg = trigger.querySelector('svg');\n\n      if (input.value.length === 0 && evt.target !== input && evt.target !== trigger && evt.target !== svg) {\n        container.classList.remove(this.options.classToolbarSearchActive);\n        trigger.focus();\n      }\n\n      if (evt.which === 27 && evt.target === input) {\n        container.classList.remove(this.options.classToolbarSearchActive);\n        trigger.focus();\n      }\n    }\n  }, {\n    key: \"_changeState\",\n    value: function _changeState(detail, callback) {\n      this[this.constructor.eventHandlers[detail.group]](detail);\n      callback();\n    }\n  }], [{\n    key: \"options\",\n    get: function get() {\n      var prefix = settings.prefix;\n      return {\n        selectorInit: \"[data-table]\",\n        selectorToolbar: \".\".concat(prefix, \"--table--toolbar\"),\n        selectorActions: \".\".concat(prefix, \"--batch-actions\"),\n        selectorCount: '[data-items-selected]',\n        selectorActionCancel: \".\".concat(prefix, \"--batch-summary__cancel\"),\n        selectorCheckbox: \".\".concat(prefix, \"--checkbox\"),\n        selectorExpandHeader: \"th.\".concat(prefix, \"--table-expand\"),\n        selectorExpandCells: \"td.\".concat(prefix, \"--table-expand\"),\n        selectorExpandableRows: \".\".concat(prefix, \"--expandable-row\"),\n        selectorParentRows: \".\".concat(prefix, \"--parent-row\"),\n        selectorChildRow: '[data-child-row]',\n        selectorTableBody: 'tbody',\n        selectorTableSort: \".\".concat(prefix, \"--table-sort\"),\n        selectorTableSelected: \".\".concat(prefix, \"--data-table--selected\"),\n        selectorToolbarSearchContainer: \".\".concat(prefix, \"--toolbar-search-container-expandable\"),\n        selectorSearchMagnifier: \".\".concat(prefix, \"--search-magnifier\"),\n        selectorSearchInput: \".\".concat(prefix, \"--search-input\"),\n        classExpandableRow: \"\".concat(prefix, \"--expandable-row\"),\n        classExpandableRowHidden: \"\".concat(prefix, \"--expandable-row--hidden\"),\n        classExpandableRowHover: \"\".concat(prefix, \"--expandable-row--hover\"),\n        classTableSortAscending: \"\".concat(prefix, \"--table-sort--ascending\"),\n        classTableSortActive: \"\".concat(prefix, \"--table-sort--active\"),\n        classToolbarSearchActive: \"\".concat(prefix, \"--toolbar-search-container-active\"),\n        classActionBarActive: \"\".concat(prefix, \"--batch-actions--active\"),\n        classTableSelected: \"\".concat(prefix, \"--data-table--selected\"),\n        eventBeforeExpand: \"data-table-beforetoggleexpand\",\n        eventAfterExpand: \"data-table-aftertoggleexpand\",\n        eventBeforeExpandAll: \"data-table-beforetoggleexpandall\",\n        eventAfterExpandAll: \"data-table-aftertoggleexpandall\",\n        eventBeforeSort: \"data-table-beforetogglesort\",\n        eventAfterSort: \"data-table-aftertogglesort\",\n        eventTrigger: '[data-event]',\n        eventParentContainer: '[data-parent-row]'\n      };\n    }\n  }]);\n\n  DataTable.components = new WeakMap();\n  DataTable.eventHandlers = {\n    expand: '_rowExpandToggle',\n    expandAll: '_rowExpandToggleAll',\n    sort: '_sortToggle',\n    select: '_selectToggle',\n    'select-all': '_selectAllToggle',\n    'action-bar-cancel': '_actionBarCancel'\n  };\n  return DataTable;\n}(mixin(createComponent, initComponentBySearch, eventedState, handles));\n\nexport default DataTable;"]},"metadata":{},"sourceType":"module"}