{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n/**\n * Copyright IBM Corp. 2016, 2018\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nimport settings from '../../globals/js/settings';\nimport mixin from '../../globals/js/misc/mixin';\nimport createComponent from '../../globals/js/mixins/create-component';\nimport initComponentBySearch from '../../globals/js/mixins/init-component-by-search';\nimport trackBlur from '../../globals/js/mixins/track-blur';\nimport eventMatches from '../../globals/js/misc/event-matches';\nimport on from '../../globals/js/misc/on';\n\nvar toArray = function toArray(arrayLike) {\n  return Array.prototype.slice.call(arrayLike);\n};\n\nvar Dropdown = /*#__PURE__*/function (_mixin) {\n  _inherits(Dropdown, _mixin);\n\n  var _super = _createSuper(Dropdown);\n  /**\n   * A selector with drop downs.\n   * @extends CreateComponent\n   * @extends InitComponentBySearch\n   * @extends TrackBlur\n   * @param {HTMLElement} element The element working as a selector.\n   * @param {object} [options] The component options.\n   * @param {string} [options.selectorItem] The CSS selector to find clickable areas in dropdown items.\n   * @param {string} [options.selectorItemSelected] The CSS selector to find the clickable area in the selected dropdown item.\n   * @param {string} [options.classSelected] The CSS class for the selected dropdown item.\n   * @param {string} [options.classOpen] The CSS class for the open state.\n   * @param {string} [options.classDisabled] The CSS class for the disabled state.\n   * @param {string} [options.eventBeforeSelected]\n   *   The name of the custom event fired before a drop down item is selected.\n   *   Cancellation of this event stops selection of drop down item.\n   * @param {string} [options.eventAfterSelected] The name of the custom event fired after a drop down item is selected.\n   */\n\n\n  function Dropdown(element, options) {\n    var _this;\n\n    _classCallCheck(this, Dropdown);\n\n    _this = _super.call(this, element, options);\n\n    _this.manage(on(_this.element.ownerDocument, 'click', function (event) {\n      _this._toggle(event);\n    }));\n\n    _this.manage(on(_this.element, 'keydown', function (event) {\n      _this._handleKeyDown(event);\n    }));\n\n    _this.manage(on(_this.element, 'click', function (event) {\n      var item = eventMatches(event, _this.options.selectorItem);\n\n      if (item) {\n        _this.select(item);\n      }\n    })); // When using the active descendant approach we use a class to give focus styles during keyboard (up/down arrows)\n    // navigation instead of relying on the :focus selector. This leaves the potential to have multiple items when\n    // switching interactions between keyboard and mouse users. To more closely align with Carbon React implementation,\n    // we want the focus class to move as the user hovers over items. This also updates the location of focus based on\n    // the last hovered item if the user switches back to using the keyboard.\n\n\n    if ( // NOTE: `selectorTrigger` does NOT match the trigger button in older markup\n    _this.element.querySelector(_this.options.selectorTrigger) && _this.element.querySelector(_this.options.selectorMenu)) {\n      // Using the latest HTML structure that supports the aria-activedescendant attribute\n      _this.manage(on(_this.element, 'mouseover', function (event) {\n        var item = eventMatches(event, _this.options.selectorItem);\n\n        if (item) {\n          _this._updateFocus(item);\n        }\n      }));\n    }\n\n    return _this;\n  }\n  /**\n   * Handles keydown event.\n   * @param {Event} event The event triggering this method.\n   */\n\n\n  _createClass(Dropdown, [{\n    key: \"_handleKeyDown\",\n    value: function _handleKeyDown(event) {\n      var isOpen = this.element.classList.contains(this.options.classOpen);\n      var direction = {\n        38: this.constructor.NAVIGATE.BACKWARD,\n        40: this.constructor.NAVIGATE.FORWARD\n      }[event.which];\n\n      if (isOpen && direction !== undefined) {\n        this.navigate(direction);\n        event.preventDefault(); // Prevents up/down keys from scrolling container\n      } else {\n        // get selected item\n        // in v10.0, the anchor elements fire click events on Enter keypress when a dropdown item is selected\n        // in v10.5 (#3586), focus is no longer placed on the dropdown items and is instead kept fixed on the ul menu\n        // so we need to manually call getCurrentNavigation and select the item\n        var item = this.getCurrentNavigation();\n\n        if (item && isOpen && (event.which === 13 || event.which === 32) && !this.element.ownerDocument.activeElement.matches(this.options.selectorItem)) {\n          event.preventDefault();\n          this.select(item);\n        }\n\n        this._toggle(event);\n      }\n    }\n    /**\n     * When using aria-activedescendant we want to make sure attributes and classes\n     * are properly cleaned up when the dropdown is closed\n     * @private\n     */\n\n  }, {\n    key: \"_focusCleanup\",\n    value: function _focusCleanup() {\n      // NOTE: `selectorTrigger` does NOT match the trigger button in older markup\n      var triggerNode = this.element.querySelector(this.options.selectorTrigger); // only want to grab the listNode IF it's using the latest a11y HTML structure\n\n      var listNode = triggerNode ? this.element.querySelector(this.options.selectorMenu) : null;\n\n      if (listNode) {\n        listNode.removeAttribute('aria-activedescendant');\n        var focusedItem = this.element.querySelector(this.options.selectorItemFocused);\n\n        if (focusedItem) {\n          focusedItem.classList.remove(this.options.classFocused);\n        }\n      }\n    }\n    /**\n     * Update focus using aria-activedescendant HTML structure\n     * @param {HTMLElement} itemToFocus The element to be focused.\n     */\n\n  }, {\n    key: \"_updateFocus\",\n    value: function _updateFocus(itemToFocus) {\n      // NOTE: `selectorTrigger` does NOT match the trigger button in older markup\n      var triggerNode = this.element.querySelector(this.options.selectorTrigger); // only want to grab the listNode IF it's using the latest a11y HTML structure\n\n      var listNode = triggerNode ? this.element.querySelector(this.options.selectorMenu) : null;\n      var previouslyFocused = listNode.querySelector(this.options.selectorItemFocused);\n      itemToFocus.classList.add(this.options.classFocused);\n      listNode.setAttribute('aria-activedescendant', itemToFocus.id);\n\n      if (previouslyFocused) {\n        previouslyFocused.classList.remove(this.options.classFocused);\n      }\n    }\n    /**\n     * Opens and closes the dropdown menu.\n     * @param {Event} [event] The event triggering this method.\n     *\n     * @todo https://github.com/carbon-design-system/carbon/issues/3641\n     */\n\n  }, {\n    key: \"_toggle\",\n    value: function _toggle(event) {\n      var _this2 = this;\n\n      var isDisabled = this.element.classList.contains(this.options.classDisabled);\n\n      if (isDisabled) {\n        return;\n      } // NOTE: `selectorTrigger` does NOT match the trigger button in older markup\n\n\n      var triggerNode = this.element.querySelector(this.options.selectorTrigger);\n\n      if ( // User presses down arrow\n      event.which === 40 && !event.target.matches(this.options.selectorItem) || // User presses space or enter and the trigger is not a button OR event is not fired by trigger\n      (!triggerNode || !triggerNode.contains(event.target)) && [13, 32].indexOf(event.which) >= 0 && !event.target.matches(this.options.selectorItem) || // User presses esc\n      event.which === 27 || // User clicks\n      event.type === 'click') {\n        var isOpen = this.element.classList.contains(this.options.classOpen);\n        var isOfSelf = this.element.contains(event.target); // Determine if the open className should be added, removed, or toggled\n\n        var actions = {\n          add: isOfSelf && event.which === 40 && !isOpen,\n          remove: (!isOfSelf || event.which === 27) && isOpen,\n          toggle: isOfSelf && event.which !== 27 && event.which !== 40\n        };\n        var changedState = false;\n        Object.keys(actions).forEach(function (action) {\n          if (actions[action]) {\n            changedState = true;\n\n            _this2.element.classList[action](_this2.options.classOpen);\n          }\n        });\n        var listItems = toArray(this.element.querySelectorAll(this.options.selectorItem)); // only want to grab the listNode IF it's using the latest a11y HTML structure\n\n        var listNode = triggerNode ? this.element.querySelector(this.options.selectorMenu) : null; // @todo remove conditionals for elements existing once legacy structure is depreciated\n\n        if (changedState && this.element.classList.contains(this.options.classOpen)) {\n          // toggled open\n          if (triggerNode) {\n            triggerNode.setAttribute('aria-expanded', 'true');\n          }\n\n          (listNode || this.element).focus();\n\n          if (listNode) {\n            var selectedNode = listNode.querySelector(this.options.selectorLinkSelected);\n            listNode.setAttribute('aria-activedescendant', (selectedNode || listItems[0]).id);\n            (selectedNode || listItems[0]).classList.add(this.options.classFocused);\n          }\n        } else if (changedState && (isOfSelf || actions.remove)) {\n          // toggled close\n          // timer is used to call focus AFTER the click event on\n          // trigger button (which is caused by keypress e.g. during keyboard navigation)\n          setTimeout(function () {\n            return (triggerNode || _this2.element).focus();\n          }, 0);\n\n          if (triggerNode) {\n            triggerNode.setAttribute('aria-expanded', 'false');\n          }\n\n          this._focusCleanup();\n        } // @todo remove once legacy structure is depreciated\n\n\n        if (!triggerNode) {\n          listItems.forEach(function (item) {\n            if (_this2.element.classList.contains(_this2.options.classOpen)) {\n              item.tabIndex = 0;\n            } else {\n              item.tabIndex = -1;\n            }\n          });\n        }\n\n        var menuListNode = this.element.querySelector(this.options.selectorMenu);\n\n        if (menuListNode) {\n          menuListNode.tabIndex = this.element.classList.contains(this.options.classOpen) ? '0' : '-1';\n        }\n      }\n    }\n    /**\n     * @returns {Element} Currently highlighted element.\n     */\n\n  }, {\n    key: \"getCurrentNavigation\",\n    value: function getCurrentNavigation() {\n      var focusedNode; // Using the latest semantic markup structure where trigger is a button\n      // @todo remove conditional once legacy structure is depreciated\n      // NOTE: `selectorTrigger` does NOT match the trigger button in older markup\n\n      if (this.element.querySelector(this.options.selectorTrigger)) {\n        var listNode = this.element.querySelector(this.options.selectorMenu);\n        var focusedId = listNode.getAttribute('aria-activedescendant');\n        focusedNode = focusedId ? listNode.querySelector(\"#\".concat(focusedId)) : null;\n      } else {\n        var focused = this.element.ownerDocument.activeElement;\n        focusedNode = focused.nodeType === Node.ELEMENT_NODE && focused.matches(this.options.selectorItem) ? focused : null;\n      }\n\n      return focusedNode;\n    }\n    /**\n     * Moves up/down the focus.\n     * @param {number} direction The direction of navigating.\n     */\n    // @todo create issue it's a better UX to move the focus when the user hovers so they stay in sync\n\n  }, {\n    key: \"navigate\",\n    value: function navigate(direction) {\n      var items = toArray(this.element.querySelectorAll(this.options.selectorItem));\n      var start = this.getCurrentNavigation() || this.element.querySelector(this.options.selectorLinkSelected);\n\n      var getNextItem = function getNextItem(old) {\n        var handleUnderflow = function handleUnderflow(i, l) {\n          return i + (i >= 0 ? 0 : l);\n        };\n\n        var handleOverflow = function handleOverflow(i, l) {\n          return i - (i < l ? 0 : l);\n        }; // `items.indexOf(old)` may be -1 (Scenario of no previous focus)\n\n\n        var index = Math.max(items.indexOf(old) + direction, -1);\n        return items[handleUnderflow(handleOverflow(index, items.length), items.length)];\n      };\n\n      var isShowSelected = this.element.classList.contains(this.options.classShowSelected);\n\n      for (var current = getNextItem(start); current && current !== start; current = getNextItem(current)) {\n        if (!current.matches(this.options.selectorItemHidden) && !current.parentNode.matches(this.options.selectorItemHidden) && (isShowSelected || !isShowSelected && !current.parentElement.matches(this.options.selectorItemSelected))) {\n          // Using the latest semantic markup structure where trigger is a button\n          // @todo remove conditional once legacy structure is depreciated\n          // NOTE: `selectorTrigger` does NOT match the trigger button in older markup\n          if (this.element.querySelector(this.options.selectorTrigger)) {\n            this._updateFocus(current);\n          } else {\n            current.focus();\n          }\n\n          break;\n        }\n      }\n    }\n    /**\n     * Handles clicking on the dropdown options, doing the following:\n     * * Change Dropdown text to selected option.\n     * * Remove selected option from options when selected.\n     * * Emit custom events.\n     * @param {HTMLElement} itemToSelect The element to be activated.\n     */\n\n  }, {\n    key: \"select\",\n    value: function select(itemToSelect) {\n      var _this3 = this;\n\n      var eventStart = new CustomEvent(this.options.eventBeforeSelected, {\n        bubbles: true,\n        cancelable: true,\n        detail: {\n          item: itemToSelect\n        }\n      });\n\n      if (this.element.dispatchEvent(eventStart)) {\n        if (this.element.dataset.dropdownType !== 'navigation') {\n          // NOTE: `selectorTrigger` does NOT match the trigger button in older markup\n          var selectorText = !this.element.querySelector(this.options.selectorTrigger) && this.element.dataset.dropdownType !== 'inline' ? this.options.selectorText : this.options.selectorTextInner;\n          var text = this.element.querySelector(selectorText);\n\n          if (text) {\n            text.innerHTML = itemToSelect.innerHTML;\n          }\n\n          itemToSelect.parentElement.classList.add(this.options.classSelected);\n        }\n\n        this.element.dataset.value = itemToSelect.parentElement.dataset.value;\n        toArray(this.element.querySelectorAll(this.options.selectorLinkSelected)).forEach(function (item) {\n          if (itemToSelect !== item) {\n            item.parentElement.classList.remove(_this3.options.classSelected);\n          }\n        });\n        this.element.dispatchEvent(new CustomEvent(this.options.eventAfterSelected, {\n          bubbles: true,\n          cancelable: true,\n          detail: {\n            item: itemToSelect\n          }\n        }));\n      }\n    }\n    /**\n     * Closes the dropdown menu if this component loses focus.\n     */\n\n  }, {\n    key: \"handleBlur\",\n    value: function handleBlur() {\n      this.element.classList.remove(this.options.classOpen);\n\n      this._focusCleanup();\n    }\n    /**\n     * The map associating DOM element and selector instance.\n     * @member Dropdown.components\n     * @type {WeakMap}\n     */\n\n  }], [{\n    key: \"options\",\n\n    /**\n     * The component options.\n     * If `options` is specified in the constructor, {@linkcode Dropdown.create .create()}, or {@linkcode Dropdown.init .init()},\n     * properties in this object are overridden for the instance being create and how {@linkcode Dropdown.init .init()} works.\n     * @member Dropdown.options\n     * @type {object}\n     * @property {string} selectorInit The CSS selector to find selectors.\n     * @property {string} [selectorTrigger]\n     *   The CSS selector to find the trigger button when using a11y compliant markup.\n     *   NOTE: Does NOT match the trigger button in older markup.\n     * @property {string} [selectorMenu] The CSS selector to find menu list when using a11y compliant markup.\n     * @property {string} [selectorText] The CSS selector to find the element showing the selected item.\n     * @property {string} [selectorTextInner] The CSS selector to find the element showing the selected item, used for inline mode.\n     * @property {string} [selectorItem] The CSS selector to find clickable areas in dropdown items.\n     * @property {string} [selectorItemHidden]\n     *   The CSS selector to find hidden dropdown items.\n     *   Used to skip dropdown items for keyboard navigation.\n     * @property {string} [selectorItemSelected] The CSS selector to find the clickable area in the selected dropdown item.\n     * @property {string} [selectorItemFocused] The CSS selector to find the clickable area in the focused dropdown item.\n     * @property {string} [selectorLinkSelected] The CSS selector to target the link node of the selected dropdown item.\n     * @property {string} [classShowSelected] The CSS class for the show selected modifier of the dropdown.\n     * @property {string} [classSelected] The CSS class for the selected dropdown item.\n     * @property {string} [classFocused] The CSS class for the focused dropdown item.\n     * @property {string} [classOpen] The CSS class for the open state.\n     * @property {string} [classDisabled] The CSS class for the disabled state.\n     * @property {string} [eventBeforeSelected]\n     *   The name of the custom event fired before a drop down item is selected.\n     *   Cancellation of this event stops selection of drop down item.\n     * @property {string} [eventAfterSelected] The name of the custom event fired after a drop down item is selected.\n     */\n    get: function get() {\n      var prefix = settings.prefix;\n      return {\n        selectorInit: '[data-dropdown]',\n        selectorTrigger: \"button.\".concat(prefix, \"--dropdown-text\"),\n        // NOTE: Does NOT match the trigger button in older markup.\n        selectorMenu: \".\".concat(prefix, \"--dropdown-list\"),\n        selectorText: \".\".concat(prefix, \"--dropdown-text\"),\n        selectorTextInner: \".\".concat(prefix, \"--dropdown-text__inner\"),\n        selectorItem: \".\".concat(prefix, \"--dropdown-link\"),\n        selectorItemSelected: \".\".concat(prefix, \"--dropdown--selected\"),\n        selectorItemFocused: \".\".concat(prefix, \"--dropdown--focused\"),\n        selectorItemHidden: \"[hidden],[aria-hidden=\\\"true\\\"]\",\n        selectorLinkSelected: \".\".concat(prefix, \"--dropdown--selected .\").concat(prefix, \"--dropdown-link\"),\n        classShowSelected: \"\".concat(prefix, \"--dropdown--show-selected\"),\n        classSelected: \"\".concat(prefix, \"--dropdown--selected\"),\n        classFocused: \"\".concat(prefix, \"--dropdown--focused\"),\n        classOpen: \"\".concat(prefix, \"--dropdown--open\"),\n        classDisabled: \"\".concat(prefix, \"--dropdown--disabled\"),\n        eventBeforeSelected: 'dropdown-beingselected',\n        eventAfterSelected: 'dropdown-selected'\n      };\n    }\n    /**\n     * Enum for navigating backward/forward.\n     * @readonly\n     * @member Dropdown.NAVIGATE\n     * @type {object}\n     * @property {number} BACKWARD Navigating backward.\n     * @property {number} FORWARD Navigating forward.\n     */\n\n  }]);\n\n  Dropdown.components = new WeakMap();\n  Dropdown.NAVIGATE = {\n    BACKWARD: -1,\n    FORWARD: 1\n  };\n  return Dropdown;\n}(mixin(createComponent, initComponentBySearch, trackBlur));\n\nexport default Dropdown;","map":{"version":3,"sources":["/Users/nicholasrenotte/Desktop/Regression/app/client/node_modules/carbon-components/es/components/dropdown/dropdown.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","value","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","settings","mixin","createComponent","initComponentBySearch","trackBlur","eventMatches","on","toArray","arrayLike","Array","slice","Dropdown","_mixin","_super","element","options","_this","manage","ownerDocument","event","_toggle","_handleKeyDown","item","selectorItem","select","querySelector","selectorTrigger","selectorMenu","_updateFocus","isOpen","classList","contains","classOpen","direction","NAVIGATE","BACKWARD","FORWARD","which","undefined","navigate","preventDefault","getCurrentNavigation","activeElement","matches","_focusCleanup","triggerNode","listNode","removeAttribute","focusedItem","selectorItemFocused","remove","classFocused","itemToFocus","previouslyFocused","add","setAttribute","id","_this2","isDisabled","classDisabled","indexOf","type","isOfSelf","actions","toggle","changedState","keys","forEach","action","listItems","querySelectorAll","focus","selectedNode","selectorLinkSelected","setTimeout","tabIndex","menuListNode","focusedNode","focusedId","getAttribute","concat","focused","nodeType","Node","ELEMENT_NODE","items","start","getNextItem","old","handleUnderflow","l","handleOverflow","index","Math","max","isShowSelected","classShowSelected","current","selectorItemHidden","parentNode","parentElement","selectorItemSelected","itemToSelect","_this3","eventStart","CustomEvent","eventBeforeSelected","bubbles","cancelable","detail","dispatchEvent","dataset","dropdownType","selectorText","selectorTextInner","text","innerHTML","classSelected","eventAfterSelected","handleBlur","get","prefix","selectorInit","components","WeakMap"],"mappings":"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","sourcesContent":["function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n/**\n * Copyright IBM Corp. 2016, 2018\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nimport settings from '../../globals/js/settings';\nimport mixin from '../../globals/js/misc/mixin';\nimport createComponent from '../../globals/js/mixins/create-component';\nimport initComponentBySearch from '../../globals/js/mixins/init-component-by-search';\nimport trackBlur from '../../globals/js/mixins/track-blur';\nimport eventMatches from '../../globals/js/misc/event-matches';\nimport on from '../../globals/js/misc/on';\n\nvar toArray = function toArray(arrayLike) {\n  return Array.prototype.slice.call(arrayLike);\n};\n\nvar Dropdown = /*#__PURE__*/function (_mixin) {\n  _inherits(Dropdown, _mixin);\n\n  var _super = _createSuper(Dropdown);\n  /**\n   * A selector with drop downs.\n   * @extends CreateComponent\n   * @extends InitComponentBySearch\n   * @extends TrackBlur\n   * @param {HTMLElement} element The element working as a selector.\n   * @param {object} [options] The component options.\n   * @param {string} [options.selectorItem] The CSS selector to find clickable areas in dropdown items.\n   * @param {string} [options.selectorItemSelected] The CSS selector to find the clickable area in the selected dropdown item.\n   * @param {string} [options.classSelected] The CSS class for the selected dropdown item.\n   * @param {string} [options.classOpen] The CSS class for the open state.\n   * @param {string} [options.classDisabled] The CSS class for the disabled state.\n   * @param {string} [options.eventBeforeSelected]\n   *   The name of the custom event fired before a drop down item is selected.\n   *   Cancellation of this event stops selection of drop down item.\n   * @param {string} [options.eventAfterSelected] The name of the custom event fired after a drop down item is selected.\n   */\n\n\n  function Dropdown(element, options) {\n    var _this;\n\n    _classCallCheck(this, Dropdown);\n\n    _this = _super.call(this, element, options);\n\n    _this.manage(on(_this.element.ownerDocument, 'click', function (event) {\n      _this._toggle(event);\n    }));\n\n    _this.manage(on(_this.element, 'keydown', function (event) {\n      _this._handleKeyDown(event);\n    }));\n\n    _this.manage(on(_this.element, 'click', function (event) {\n      var item = eventMatches(event, _this.options.selectorItem);\n\n      if (item) {\n        _this.select(item);\n      }\n    })); // When using the active descendant approach we use a class to give focus styles during keyboard (up/down arrows)\n    // navigation instead of relying on the :focus selector. This leaves the potential to have multiple items when\n    // switching interactions between keyboard and mouse users. To more closely align with Carbon React implementation,\n    // we want the focus class to move as the user hovers over items. This also updates the location of focus based on\n    // the last hovered item if the user switches back to using the keyboard.\n\n\n    if ( // NOTE: `selectorTrigger` does NOT match the trigger button in older markup\n    _this.element.querySelector(_this.options.selectorTrigger) && _this.element.querySelector(_this.options.selectorMenu)) {\n      // Using the latest HTML structure that supports the aria-activedescendant attribute\n      _this.manage(on(_this.element, 'mouseover', function (event) {\n        var item = eventMatches(event, _this.options.selectorItem);\n\n        if (item) {\n          _this._updateFocus(item);\n        }\n      }));\n    }\n\n    return _this;\n  }\n  /**\n   * Handles keydown event.\n   * @param {Event} event The event triggering this method.\n   */\n\n\n  _createClass(Dropdown, [{\n    key: \"_handleKeyDown\",\n    value: function _handleKeyDown(event) {\n      var isOpen = this.element.classList.contains(this.options.classOpen);\n      var direction = {\n        38: this.constructor.NAVIGATE.BACKWARD,\n        40: this.constructor.NAVIGATE.FORWARD\n      }[event.which];\n\n      if (isOpen && direction !== undefined) {\n        this.navigate(direction);\n        event.preventDefault(); // Prevents up/down keys from scrolling container\n      } else {\n        // get selected item\n        // in v10.0, the anchor elements fire click events on Enter keypress when a dropdown item is selected\n        // in v10.5 (#3586), focus is no longer placed on the dropdown items and is instead kept fixed on the ul menu\n        // so we need to manually call getCurrentNavigation and select the item\n        var item = this.getCurrentNavigation();\n\n        if (item && isOpen && (event.which === 13 || event.which === 32) && !this.element.ownerDocument.activeElement.matches(this.options.selectorItem)) {\n          event.preventDefault();\n          this.select(item);\n        }\n\n        this._toggle(event);\n      }\n    }\n    /**\n     * When using aria-activedescendant we want to make sure attributes and classes\n     * are properly cleaned up when the dropdown is closed\n     * @private\n     */\n\n  }, {\n    key: \"_focusCleanup\",\n    value: function _focusCleanup() {\n      // NOTE: `selectorTrigger` does NOT match the trigger button in older markup\n      var triggerNode = this.element.querySelector(this.options.selectorTrigger); // only want to grab the listNode IF it's using the latest a11y HTML structure\n\n      var listNode = triggerNode ? this.element.querySelector(this.options.selectorMenu) : null;\n\n      if (listNode) {\n        listNode.removeAttribute('aria-activedescendant');\n        var focusedItem = this.element.querySelector(this.options.selectorItemFocused);\n\n        if (focusedItem) {\n          focusedItem.classList.remove(this.options.classFocused);\n        }\n      }\n    }\n    /**\n     * Update focus using aria-activedescendant HTML structure\n     * @param {HTMLElement} itemToFocus The element to be focused.\n     */\n\n  }, {\n    key: \"_updateFocus\",\n    value: function _updateFocus(itemToFocus) {\n      // NOTE: `selectorTrigger` does NOT match the trigger button in older markup\n      var triggerNode = this.element.querySelector(this.options.selectorTrigger); // only want to grab the listNode IF it's using the latest a11y HTML structure\n\n      var listNode = triggerNode ? this.element.querySelector(this.options.selectorMenu) : null;\n      var previouslyFocused = listNode.querySelector(this.options.selectorItemFocused);\n      itemToFocus.classList.add(this.options.classFocused);\n      listNode.setAttribute('aria-activedescendant', itemToFocus.id);\n\n      if (previouslyFocused) {\n        previouslyFocused.classList.remove(this.options.classFocused);\n      }\n    }\n    /**\n     * Opens and closes the dropdown menu.\n     * @param {Event} [event] The event triggering this method.\n     *\n     * @todo https://github.com/carbon-design-system/carbon/issues/3641\n     */\n\n  }, {\n    key: \"_toggle\",\n    value: function _toggle(event) {\n      var _this2 = this;\n\n      var isDisabled = this.element.classList.contains(this.options.classDisabled);\n\n      if (isDisabled) {\n        return;\n      } // NOTE: `selectorTrigger` does NOT match the trigger button in older markup\n\n\n      var triggerNode = this.element.querySelector(this.options.selectorTrigger);\n\n      if ( // User presses down arrow\n      event.which === 40 && !event.target.matches(this.options.selectorItem) || // User presses space or enter and the trigger is not a button OR event is not fired by trigger\n      (!triggerNode || !triggerNode.contains(event.target)) && [13, 32].indexOf(event.which) >= 0 && !event.target.matches(this.options.selectorItem) || // User presses esc\n      event.which === 27 || // User clicks\n      event.type === 'click') {\n        var isOpen = this.element.classList.contains(this.options.classOpen);\n        var isOfSelf = this.element.contains(event.target); // Determine if the open className should be added, removed, or toggled\n\n        var actions = {\n          add: isOfSelf && event.which === 40 && !isOpen,\n          remove: (!isOfSelf || event.which === 27) && isOpen,\n          toggle: isOfSelf && event.which !== 27 && event.which !== 40\n        };\n        var changedState = false;\n        Object.keys(actions).forEach(function (action) {\n          if (actions[action]) {\n            changedState = true;\n\n            _this2.element.classList[action](_this2.options.classOpen);\n          }\n        });\n        var listItems = toArray(this.element.querySelectorAll(this.options.selectorItem)); // only want to grab the listNode IF it's using the latest a11y HTML structure\n\n        var listNode = triggerNode ? this.element.querySelector(this.options.selectorMenu) : null; // @todo remove conditionals for elements existing once legacy structure is depreciated\n\n        if (changedState && this.element.classList.contains(this.options.classOpen)) {\n          // toggled open\n          if (triggerNode) {\n            triggerNode.setAttribute('aria-expanded', 'true');\n          }\n\n          (listNode || this.element).focus();\n\n          if (listNode) {\n            var selectedNode = listNode.querySelector(this.options.selectorLinkSelected);\n            listNode.setAttribute('aria-activedescendant', (selectedNode || listItems[0]).id);\n            (selectedNode || listItems[0]).classList.add(this.options.classFocused);\n          }\n        } else if (changedState && (isOfSelf || actions.remove)) {\n          // toggled close\n          // timer is used to call focus AFTER the click event on\n          // trigger button (which is caused by keypress e.g. during keyboard navigation)\n          setTimeout(function () {\n            return (triggerNode || _this2.element).focus();\n          }, 0);\n\n          if (triggerNode) {\n            triggerNode.setAttribute('aria-expanded', 'false');\n          }\n\n          this._focusCleanup();\n        } // @todo remove once legacy structure is depreciated\n\n\n        if (!triggerNode) {\n          listItems.forEach(function (item) {\n            if (_this2.element.classList.contains(_this2.options.classOpen)) {\n              item.tabIndex = 0;\n            } else {\n              item.tabIndex = -1;\n            }\n          });\n        }\n\n        var menuListNode = this.element.querySelector(this.options.selectorMenu);\n\n        if (menuListNode) {\n          menuListNode.tabIndex = this.element.classList.contains(this.options.classOpen) ? '0' : '-1';\n        }\n      }\n    }\n    /**\n     * @returns {Element} Currently highlighted element.\n     */\n\n  }, {\n    key: \"getCurrentNavigation\",\n    value: function getCurrentNavigation() {\n      var focusedNode; // Using the latest semantic markup structure where trigger is a button\n      // @todo remove conditional once legacy structure is depreciated\n      // NOTE: `selectorTrigger` does NOT match the trigger button in older markup\n\n      if (this.element.querySelector(this.options.selectorTrigger)) {\n        var listNode = this.element.querySelector(this.options.selectorMenu);\n        var focusedId = listNode.getAttribute('aria-activedescendant');\n        focusedNode = focusedId ? listNode.querySelector(\"#\".concat(focusedId)) : null;\n      } else {\n        var focused = this.element.ownerDocument.activeElement;\n        focusedNode = focused.nodeType === Node.ELEMENT_NODE && focused.matches(this.options.selectorItem) ? focused : null;\n      }\n\n      return focusedNode;\n    }\n    /**\n     * Moves up/down the focus.\n     * @param {number} direction The direction of navigating.\n     */\n    // @todo create issue it's a better UX to move the focus when the user hovers so they stay in sync\n\n  }, {\n    key: \"navigate\",\n    value: function navigate(direction) {\n      var items = toArray(this.element.querySelectorAll(this.options.selectorItem));\n      var start = this.getCurrentNavigation() || this.element.querySelector(this.options.selectorLinkSelected);\n\n      var getNextItem = function getNextItem(old) {\n        var handleUnderflow = function handleUnderflow(i, l) {\n          return i + (i >= 0 ? 0 : l);\n        };\n\n        var handleOverflow = function handleOverflow(i, l) {\n          return i - (i < l ? 0 : l);\n        }; // `items.indexOf(old)` may be -1 (Scenario of no previous focus)\n\n\n        var index = Math.max(items.indexOf(old) + direction, -1);\n        return items[handleUnderflow(handleOverflow(index, items.length), items.length)];\n      };\n\n      var isShowSelected = this.element.classList.contains(this.options.classShowSelected);\n\n      for (var current = getNextItem(start); current && current !== start; current = getNextItem(current)) {\n        if (!current.matches(this.options.selectorItemHidden) && !current.parentNode.matches(this.options.selectorItemHidden) && (isShowSelected || !isShowSelected && !current.parentElement.matches(this.options.selectorItemSelected))) {\n          // Using the latest semantic markup structure where trigger is a button\n          // @todo remove conditional once legacy structure is depreciated\n          // NOTE: `selectorTrigger` does NOT match the trigger button in older markup\n          if (this.element.querySelector(this.options.selectorTrigger)) {\n            this._updateFocus(current);\n          } else {\n            current.focus();\n          }\n\n          break;\n        }\n      }\n    }\n    /**\n     * Handles clicking on the dropdown options, doing the following:\n     * * Change Dropdown text to selected option.\n     * * Remove selected option from options when selected.\n     * * Emit custom events.\n     * @param {HTMLElement} itemToSelect The element to be activated.\n     */\n\n  }, {\n    key: \"select\",\n    value: function select(itemToSelect) {\n      var _this3 = this;\n\n      var eventStart = new CustomEvent(this.options.eventBeforeSelected, {\n        bubbles: true,\n        cancelable: true,\n        detail: {\n          item: itemToSelect\n        }\n      });\n\n      if (this.element.dispatchEvent(eventStart)) {\n        if (this.element.dataset.dropdownType !== 'navigation') {\n          // NOTE: `selectorTrigger` does NOT match the trigger button in older markup\n          var selectorText = !this.element.querySelector(this.options.selectorTrigger) && this.element.dataset.dropdownType !== 'inline' ? this.options.selectorText : this.options.selectorTextInner;\n          var text = this.element.querySelector(selectorText);\n\n          if (text) {\n            text.innerHTML = itemToSelect.innerHTML;\n          }\n\n          itemToSelect.parentElement.classList.add(this.options.classSelected);\n        }\n\n        this.element.dataset.value = itemToSelect.parentElement.dataset.value;\n        toArray(this.element.querySelectorAll(this.options.selectorLinkSelected)).forEach(function (item) {\n          if (itemToSelect !== item) {\n            item.parentElement.classList.remove(_this3.options.classSelected);\n          }\n        });\n        this.element.dispatchEvent(new CustomEvent(this.options.eventAfterSelected, {\n          bubbles: true,\n          cancelable: true,\n          detail: {\n            item: itemToSelect\n          }\n        }));\n      }\n    }\n    /**\n     * Closes the dropdown menu if this component loses focus.\n     */\n\n  }, {\n    key: \"handleBlur\",\n    value: function handleBlur() {\n      this.element.classList.remove(this.options.classOpen);\n\n      this._focusCleanup();\n    }\n    /**\n     * The map associating DOM element and selector instance.\n     * @member Dropdown.components\n     * @type {WeakMap}\n     */\n\n  }], [{\n    key: \"options\",\n\n    /**\n     * The component options.\n     * If `options` is specified in the constructor, {@linkcode Dropdown.create .create()}, or {@linkcode Dropdown.init .init()},\n     * properties in this object are overridden for the instance being create and how {@linkcode Dropdown.init .init()} works.\n     * @member Dropdown.options\n     * @type {object}\n     * @property {string} selectorInit The CSS selector to find selectors.\n     * @property {string} [selectorTrigger]\n     *   The CSS selector to find the trigger button when using a11y compliant markup.\n     *   NOTE: Does NOT match the trigger button in older markup.\n     * @property {string} [selectorMenu] The CSS selector to find menu list when using a11y compliant markup.\n     * @property {string} [selectorText] The CSS selector to find the element showing the selected item.\n     * @property {string} [selectorTextInner] The CSS selector to find the element showing the selected item, used for inline mode.\n     * @property {string} [selectorItem] The CSS selector to find clickable areas in dropdown items.\n     * @property {string} [selectorItemHidden]\n     *   The CSS selector to find hidden dropdown items.\n     *   Used to skip dropdown items for keyboard navigation.\n     * @property {string} [selectorItemSelected] The CSS selector to find the clickable area in the selected dropdown item.\n     * @property {string} [selectorItemFocused] The CSS selector to find the clickable area in the focused dropdown item.\n     * @property {string} [selectorLinkSelected] The CSS selector to target the link node of the selected dropdown item.\n     * @property {string} [classShowSelected] The CSS class for the show selected modifier of the dropdown.\n     * @property {string} [classSelected] The CSS class for the selected dropdown item.\n     * @property {string} [classFocused] The CSS class for the focused dropdown item.\n     * @property {string} [classOpen] The CSS class for the open state.\n     * @property {string} [classDisabled] The CSS class for the disabled state.\n     * @property {string} [eventBeforeSelected]\n     *   The name of the custom event fired before a drop down item is selected.\n     *   Cancellation of this event stops selection of drop down item.\n     * @property {string} [eventAfterSelected] The name of the custom event fired after a drop down item is selected.\n     */\n    get: function get() {\n      var prefix = settings.prefix;\n      return {\n        selectorInit: '[data-dropdown]',\n        selectorTrigger: \"button.\".concat(prefix, \"--dropdown-text\"),\n        // NOTE: Does NOT match the trigger button in older markup.\n        selectorMenu: \".\".concat(prefix, \"--dropdown-list\"),\n        selectorText: \".\".concat(prefix, \"--dropdown-text\"),\n        selectorTextInner: \".\".concat(prefix, \"--dropdown-text__inner\"),\n        selectorItem: \".\".concat(prefix, \"--dropdown-link\"),\n        selectorItemSelected: \".\".concat(prefix, \"--dropdown--selected\"),\n        selectorItemFocused: \".\".concat(prefix, \"--dropdown--focused\"),\n        selectorItemHidden: \"[hidden],[aria-hidden=\\\"true\\\"]\",\n        selectorLinkSelected: \".\".concat(prefix, \"--dropdown--selected .\").concat(prefix, \"--dropdown-link\"),\n        classShowSelected: \"\".concat(prefix, \"--dropdown--show-selected\"),\n        classSelected: \"\".concat(prefix, \"--dropdown--selected\"),\n        classFocused: \"\".concat(prefix, \"--dropdown--focused\"),\n        classOpen: \"\".concat(prefix, \"--dropdown--open\"),\n        classDisabled: \"\".concat(prefix, \"--dropdown--disabled\"),\n        eventBeforeSelected: 'dropdown-beingselected',\n        eventAfterSelected: 'dropdown-selected'\n      };\n    }\n    /**\n     * Enum for navigating backward/forward.\n     * @readonly\n     * @member Dropdown.NAVIGATE\n     * @type {object}\n     * @property {number} BACKWARD Navigating backward.\n     * @property {number} FORWARD Navigating forward.\n     */\n\n  }]);\n\n  Dropdown.components = new WeakMap();\n  Dropdown.NAVIGATE = {\n    BACKWARD: -1,\n    FORWARD: 1\n  };\n  return Dropdown;\n}(mixin(createComponent, initComponentBySearch, trackBlur));\n\nexport default Dropdown;"]},"metadata":{},"sourceType":"module"}