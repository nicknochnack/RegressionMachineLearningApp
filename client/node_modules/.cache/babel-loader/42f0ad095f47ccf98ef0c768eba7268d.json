{"ast":null,"code":"// Internal imports\nimport { CartesianOrientations, ScaleTypes, TruncationTypes } from \"./interfaces\";\nimport { debounce as lodashDebounce, merge as lodashMerge, cloneDeep as lodashCloneDeep, uniq as lodashUnique, clamp as lodashClamp, isEqual as lodashIsEqual, flatMapDeep as lodashFlatMapDeep, kebabCase as lodashKebabCase, fromPairs as lodashFromPairs, some as lodashSome } from \"lodash-es\";\nimport { mouse } from \"d3-selection\"; // Functions\n\nexport var Tools;\n\n(function (Tools) {\n  // Export these functions from lodash\n  Tools.debounce = lodashDebounce;\n  Tools.clone = lodashCloneDeep;\n  Tools.merge = lodashMerge;\n  Tools.removeArrayDuplicates = lodashUnique;\n  Tools.clamp = lodashClamp;\n  Tools.isEqual = lodashIsEqual;\n  Tools.flatMapDeep = lodashFlatMapDeep;\n  Tools.kebabCase = lodashKebabCase;\n  Tools.fromPairs = lodashFromPairs;\n  Tools.some = lodashSome;\n\n  function debounceWithD3MousePosition(fn, delay, element) {\n    var timer = null;\n    return function () {\n      var context = this;\n      var args = arguments; //we get the D3 event here\n\n      context.mousePosition = mouse(element);\n      clearTimeout(timer);\n      timer = setTimeout(function () {\n        //and use the reference here\n        fn.apply(context, args);\n      }, delay);\n    };\n  }\n\n  Tools.debounceWithD3MousePosition = debounceWithD3MousePosition;\n  /**\n   * Returns default chart options merged with provided options,\n   * with special cases for axes.\n   * Axes object will not merge the not provided axes.\n   *\n   * @export\n   * @param {AxisChartOptions} defaultOptions Configuration.options[chartType]\n   * @param {AxisChartOptions} providedOptions user provided options\n   * @returns merged options\n   */\n\n  function mergeDefaultChartOptions(defaultOptions, providedOptions) {\n    defaultOptions = Tools.clone(defaultOptions);\n    var providedAxesNames = Object.keys(providedOptions.axes || {});\n\n    if (providedAxesNames.length === 0) {\n      delete defaultOptions.axes;\n    } // Update deprecated options to work with the tabular data format\n    // Similar to the functionality in model.transformToTabularData()\n\n\n    for (var axisName in defaultOptions.axes) {\n      if (providedAxesNames.includes(axisName)) {\n        var providedAxisOptions = providedOptions.axes[axisName];\n\n        if (providedAxisOptions[\"primary\"] || providedAxisOptions[\"secondary\"]) {\n          console.warn(\"`primary` & `secondary` are no longer needed for axis configurations. Read more here https://carbon-design-system.github.io/carbon-charts/?path=/story/tutorials--tabular-data-format\");\n        }\n\n        var identifier = providedAxisOptions[\"mapsTo\"];\n\n        if (identifier === undefined || identifier === null) {\n          var scaleType = providedAxisOptions[\"scaleType\"];\n\n          if (scaleType === undefined || scaleType === null) {\n            providedAxisOptions[\"mapsTo\"] = \"value\";\n          } else if (scaleType === ScaleTypes.TIME) {\n            providedAxisOptions[\"mapsTo\"] = \"date\";\n          } else if (scaleType === ScaleTypes.LABELS) {\n            providedAxisOptions[\"mapsTo\"] = \"key\";\n          }\n        }\n      } else {\n        delete defaultOptions.axes[axisName];\n      }\n    }\n\n    return Tools.merge(defaultOptions, providedOptions);\n  }\n\n  Tools.mergeDefaultChartOptions = mergeDefaultChartOptions;\n  /**************************************\n   *  DOM-related operations            *\n   *************************************/\n\n  /**\n   * Get width & height of an element\n   *\n   * @export\n   * @param {any} el element to get dimensions from\n   * @returns an object containing the width and height of el\n   */\n\n  function getDimensions(el) {\n    return {\n      width: parseFloat(el.style.width.replace(\"px\", \"\") || el.offsetWidth),\n      height: parseFloat(el.style.height.replace(\"px\", \"\") || el.offsetHeight)\n    };\n  }\n\n  Tools.getDimensions = getDimensions;\n  /**\n   * Gets elements's x and y translations from transform attribute or returns null\n   *\n   * @param {HTMLElement} element\n   * @returns an object containing the translated x and y values or null\n   */\n\n  function getTranslationValues(elementRef) {\n    if (!elementRef) {\n      return;\n    } // regex to ONLY get values for translate (instead of all rotate, translate, skew, etc)\n\n\n    var translateRegex = /translate\\([0-9]+\\.?[0-9]*,[0-9]+\\.?[0-9]*\\)/;\n    var transformStr = elementRef.getAttribute(\"transform\").match(translateRegex);\n\n    if (!transformStr) {\n      return null;\n    } // check for the match\n\n\n    if (transformStr[0]) {\n      var transforms = transformStr[0].replace(/translate\\(/, \"\").replace(/\\)/, \"\").split(\",\");\n      return {\n        tx: transforms[0],\n        ty: transforms[1]\n      };\n    }\n\n    return null;\n  }\n\n  Tools.getTranslationValues = getTranslationValues;\n  /**************************************\n   *  Formatting & calculations         *\n   *************************************/\n\n  /**\n   * Gets x and y coordinates from HTML transform attribute\n   *\n   * @export\n   * @param {any} string the transform attribute string ie. transform(x,y)\n   * @returns Returns an object with x and y offsets of the transform\n   */\n\n  function getTranformOffsets(string) {\n    var regExp = /\\(([^)]+)\\)/;\n    var match = regExp.exec(string)[1];\n    var xyString = match.split(\",\");\n    return {\n      x: parseFloat(xyString[0]),\n      y: parseFloat(xyString[1])\n    };\n  }\n\n  Tools.getTranformOffsets = getTranformOffsets;\n  /**\n   * Returns string value for height/width using pixels if there isn't a specified unit of measure\n   *\n   * @param value string or number value to be checked for unit of measure\n   */\n\n  function formatWidthHeightValues(value) {\n    var stringValue = value.toString(); // If the value provided contains any letters\n    // Return it the same way\n\n    if (stringValue.match(/[a-z]/i)) {\n      return stringValue;\n    }\n\n    return stringValue + \"px\";\n  }\n\n  Tools.formatWidthHeightValues = formatWidthHeightValues;\n  /**\n   * Capitalizes first letter of a string\n   *\n   * @export\n   * @param {any} string the input string to perform first letter capitalization with\n   * @returns The transformed string after first letter is capitalized\n   */\n\n  function capitalizeFirstLetter(string) {\n    return string[0].toUpperCase() + string.slice(1);\n  }\n\n  Tools.capitalizeFirstLetter = capitalizeFirstLetter;\n  /**\n   * Get the percentage of a datapoint compared to the entire dataset.\n   * @export\n   * @param {any} item\n   * @param {any} fullData\n   * @returns The percentage in the form of a number (1 significant digit if necessary)\n   */\n\n  function convertValueToPercentage(item, fullData) {\n    var percentage = item / fullData.reduce(function (accum, val) {\n      return accum + val.value;\n    }, 0) * 100; // if the value has any significant figures, keep 1\n\n    return percentage % 1 !== 0 ? parseFloat(percentage.toFixed(1)) : percentage;\n  }\n\n  Tools.convertValueToPercentage = convertValueToPercentage;\n  /**\n   * Truncate the labels\n   * @export\n   * @param {any} fullText\n   * @param {any} truncationType\n   * @param {any} numCharacter\n   * @returns Truncated text\n   */\n\n  function truncateLabel(fullText, truncationType, numCharacter) {\n    if (numCharacter > fullText.length) {\n      return fullText;\n    }\n\n    if (truncationType === TruncationTypes.MID_LINE) {\n      return fullText.substr(0, numCharacter / 2) + \"...\" + fullText.substr(-numCharacter / 2);\n    } else if (truncationType === TruncationTypes.FRONT_LINE) {\n      return \"...\" + fullText.substr(-numCharacter);\n    } else if (truncationType === TruncationTypes.END_LINE) {\n      return fullText.substr(0, numCharacter) + \"...\";\n    }\n  }\n\n  Tools.truncateLabel = truncateLabel;\n  /**************************************\n   *  Object/array related checks       *\n   *************************************/\n\n  /**\n   * Compares two arrays to return the difference between two arrays' items.\n   *\n   * @export\n   * @param {any[]} oldArray the array to check for missing items\n   * @param {any[]} newArray the array to check for newly added items\n   * @returns An object containing items missing (existing in oldArray but not newArray)\n   * and items added (existing in newArray but not in oldArray). Object is of the form { missing: [], added: [] }\n   */\n\n  function arrayDifferences(oldArray, newArray) {\n    var difference = {\n      missing: [],\n      added: []\n    };\n    oldArray.forEach(function (element) {\n      if (newArray.indexOf(element) === -1) {\n        difference.missing.push(element);\n      }\n    });\n    newArray.forEach(function (element) {\n      if (oldArray.indexOf(element) === -1) {\n        difference.added.push(element);\n      }\n    });\n    return difference;\n  }\n\n  Tools.arrayDifferences = arrayDifferences;\n  /**\n   * Gets the duplicated keys from an array of data\n   *\n   * @export\n   * @param {*} data - array of data\n   * @returns A list of the duplicated keys in data\n   */\n\n  function getDuplicateValues(arr) {\n    var values = [];\n    var duplicateValues = [];\n    arr.forEach(function (value) {\n      if (values.indexOf(value) !== -1 && duplicateValues.indexOf(value) === -1) {\n        duplicateValues.push(value);\n      }\n\n      values.push(value);\n    });\n    return duplicateValues;\n  }\n\n  Tools.getDuplicateValues = getDuplicateValues; // ================================================================================\n  // D3 Extensions\n  // ================================================================================\n\n  /**\n   * In D3, moves an element to the front of the canvas\n   *\n   * @export\n   * @param {any} element input element to moved in front\n   * @returns The function to be used by D3 to push element to the top of the canvas\n   */\n\n  function moveToFront(element) {\n    return element.each(function () {\n      this.parentNode.appendChild(this);\n    });\n  }\n\n  Tools.moveToFront = moveToFront; // ================================================================================\n  // Style Helpers\n  // ================================================================================\n\n  /**\n   * Gets a speicified property from within an object.\n   *\n   * @param object the object containing the property to retrieve\n   * @param propPath nested properties used to extract the final property from within the object\n   * (i.e \"style\", \"color\" would retrieve the color property from within an object that has \"color\" nested within \"style\")\n   */\n\n  Tools.getProperty = function (object) {\n    var propPath = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      propPath[_i - 1] = arguments[_i];\n    }\n\n    var position = object;\n\n    if (position) {\n      for (var _a = 0, propPath_1 = propPath; _a < propPath_1.length; _a++) {\n        var prop = propPath_1[_a];\n\n        if (position[prop] !== null && position[prop] !== undefined) {\n          position = position[prop];\n        } else {\n          return null;\n        }\n      }\n\n      return position;\n    }\n\n    return null;\n  };\n\n  Tools.flipSVGCoordinatesBasedOnOrientation = function (verticalCoordinates, orientation) {\n    if (orientation === CartesianOrientations.HORIZONTAL) {\n      return {\n        y0: verticalCoordinates.x0,\n        y1: verticalCoordinates.x1,\n        x0: verticalCoordinates.y0,\n        x1: verticalCoordinates.y1\n      };\n    }\n\n    return verticalCoordinates;\n  };\n\n  Tools.generateSVGPathString = function (verticalCoordinates, orientation) {\n    var _a = Tools.flipSVGCoordinatesBasedOnOrientation(verticalCoordinates, orientation),\n        x0 = _a.x0,\n        x1 = _a.x1,\n        y0 = _a.y0,\n        y1 = _a.y1;\n\n    return \"M\" + x0 + \",\" + y0 + \"L\" + x0 + \",\" + y1 + \"L\" + x1 + \",\" + y1 + \"L\" + x1 + \",\" + y0 + \"L\" + x0 + \",\" + y0;\n  };\n\n  function flipDomainAndRangeBasedOnOrientation(domain, range, orientation) {\n    return orientation === CartesianOrientations.VERTICAL ? [domain, range] : [range, domain];\n  }\n\n  Tools.flipDomainAndRangeBasedOnOrientation = flipDomainAndRangeBasedOnOrientation;\n\n  Tools.compareNumeric = function (a, b) {\n    return Number(a) === Number(b);\n  };\n})(Tools || (Tools = {}));","map":{"version":3,"sources":["/Users/nicholasrenotte/Desktop/Regression/app/client/node_modules/@carbon/charts/tools.js"],"names":["CartesianOrientations","ScaleTypes","TruncationTypes","debounce","lodashDebounce","merge","lodashMerge","cloneDeep","lodashCloneDeep","uniq","lodashUnique","clamp","lodashClamp","isEqual","lodashIsEqual","flatMapDeep","lodashFlatMapDeep","kebabCase","lodashKebabCase","fromPairs","lodashFromPairs","some","lodashSome","mouse","Tools","clone","removeArrayDuplicates","debounceWithD3MousePosition","fn","delay","element","timer","context","args","arguments","mousePosition","clearTimeout","setTimeout","apply","mergeDefaultChartOptions","defaultOptions","providedOptions","providedAxesNames","Object","keys","axes","length","axisName","includes","providedAxisOptions","console","warn","identifier","undefined","scaleType","TIME","LABELS","getDimensions","el","width","parseFloat","style","replace","offsetWidth","height","offsetHeight","getTranslationValues","elementRef","translateRegex","transformStr","getAttribute","match","transforms","split","tx","ty","getTranformOffsets","string","regExp","exec","xyString","x","y","formatWidthHeightValues","value","stringValue","toString","capitalizeFirstLetter","toUpperCase","slice","convertValueToPercentage","item","fullData","percentage","reduce","accum","val","toFixed","truncateLabel","fullText","truncationType","numCharacter","MID_LINE","substr","FRONT_LINE","END_LINE","arrayDifferences","oldArray","newArray","difference","missing","added","forEach","indexOf","push","getDuplicateValues","arr","values","duplicateValues","moveToFront","each","parentNode","appendChild","getProperty","object","propPath","_i","position","_a","propPath_1","prop","flipSVGCoordinatesBasedOnOrientation","verticalCoordinates","orientation","HORIZONTAL","y0","x0","y1","x1","generateSVGPathString","flipDomainAndRangeBasedOnOrientation","domain","range","VERTICAL","compareNumeric","a","b","Number"],"mappings":"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","sourcesContent":["// Internal imports\nimport { CartesianOrientations, ScaleTypes, TruncationTypes } from \"./interfaces\";\nimport { debounce as lodashDebounce, merge as lodashMerge, cloneDeep as lodashCloneDeep, uniq as lodashUnique, clamp as lodashClamp, isEqual as lodashIsEqual, flatMapDeep as lodashFlatMapDeep, kebabCase as lodashKebabCase, fromPairs as lodashFromPairs, some as lodashSome } from \"lodash-es\";\nimport { mouse } from \"d3-selection\";\n// Functions\nexport var Tools;\n(function (Tools) {\n    // Export these functions from lodash\n    Tools.debounce = lodashDebounce;\n    Tools.clone = lodashCloneDeep;\n    Tools.merge = lodashMerge;\n    Tools.removeArrayDuplicates = lodashUnique;\n    Tools.clamp = lodashClamp;\n    Tools.isEqual = lodashIsEqual;\n    Tools.flatMapDeep = lodashFlatMapDeep;\n    Tools.kebabCase = lodashKebabCase;\n    Tools.fromPairs = lodashFromPairs;\n    Tools.some = lodashSome;\n    function debounceWithD3MousePosition(fn, delay, element) {\n        var timer = null;\n        return function () {\n            var context = this;\n            var args = arguments;\n            //we get the D3 event here\n            context.mousePosition = mouse(element);\n            clearTimeout(timer);\n            timer = setTimeout(function () {\n                //and use the reference here\n                fn.apply(context, args);\n            }, delay);\n        };\n    }\n    Tools.debounceWithD3MousePosition = debounceWithD3MousePosition;\n    /**\n     * Returns default chart options merged with provided options,\n     * with special cases for axes.\n     * Axes object will not merge the not provided axes.\n     *\n     * @export\n     * @param {AxisChartOptions} defaultOptions Configuration.options[chartType]\n     * @param {AxisChartOptions} providedOptions user provided options\n     * @returns merged options\n     */\n    function mergeDefaultChartOptions(defaultOptions, providedOptions) {\n        defaultOptions = Tools.clone(defaultOptions);\n        var providedAxesNames = Object.keys(providedOptions.axes || {});\n        if (providedAxesNames.length === 0) {\n            delete defaultOptions.axes;\n        }\n        // Update deprecated options to work with the tabular data format\n        // Similar to the functionality in model.transformToTabularData()\n        for (var axisName in defaultOptions.axes) {\n            if (providedAxesNames.includes(axisName)) {\n                var providedAxisOptions = providedOptions.axes[axisName];\n                if (providedAxisOptions[\"primary\"] ||\n                    providedAxisOptions[\"secondary\"]) {\n                    console.warn(\"`primary` & `secondary` are no longer needed for axis configurations. Read more here https://carbon-design-system.github.io/carbon-charts/?path=/story/tutorials--tabular-data-format\");\n                }\n                var identifier = providedAxisOptions[\"mapsTo\"];\n                if (identifier === undefined || identifier === null) {\n                    var scaleType = providedAxisOptions[\"scaleType\"];\n                    if (scaleType === undefined || scaleType === null) {\n                        providedAxisOptions[\"mapsTo\"] = \"value\";\n                    }\n                    else if (scaleType === ScaleTypes.TIME) {\n                        providedAxisOptions[\"mapsTo\"] = \"date\";\n                    }\n                    else if (scaleType === ScaleTypes.LABELS) {\n                        providedAxisOptions[\"mapsTo\"] = \"key\";\n                    }\n                }\n            }\n            else {\n                delete defaultOptions.axes[axisName];\n            }\n        }\n        return Tools.merge(defaultOptions, providedOptions);\n    }\n    Tools.mergeDefaultChartOptions = mergeDefaultChartOptions;\n    /**************************************\n     *  DOM-related operations            *\n     *************************************/\n    /**\n     * Get width & height of an element\n     *\n     * @export\n     * @param {any} el element to get dimensions from\n     * @returns an object containing the width and height of el\n     */\n    function getDimensions(el) {\n        return {\n            width: parseFloat(el.style.width.replace(\"px\", \"\") || el.offsetWidth),\n            height: parseFloat(el.style.height.replace(\"px\", \"\") || el.offsetHeight)\n        };\n    }\n    Tools.getDimensions = getDimensions;\n    /**\n     * Gets elements's x and y translations from transform attribute or returns null\n     *\n     * @param {HTMLElement} element\n     * @returns an object containing the translated x and y values or null\n     */\n    function getTranslationValues(elementRef) {\n        if (!elementRef) {\n            return;\n        }\n        // regex to ONLY get values for translate (instead of all rotate, translate, skew, etc)\n        var translateRegex = /translate\\([0-9]+\\.?[0-9]*,[0-9]+\\.?[0-9]*\\)/;\n        var transformStr = elementRef\n            .getAttribute(\"transform\")\n            .match(translateRegex);\n        if (!transformStr) {\n            return null;\n        }\n        // check for the match\n        if (transformStr[0]) {\n            var transforms = transformStr[0]\n                .replace(/translate\\(/, \"\")\n                .replace(/\\)/, \"\")\n                .split(\",\");\n            return {\n                tx: transforms[0],\n                ty: transforms[1]\n            };\n        }\n        return null;\n    }\n    Tools.getTranslationValues = getTranslationValues;\n    /**************************************\n     *  Formatting & calculations         *\n     *************************************/\n    /**\n     * Gets x and y coordinates from HTML transform attribute\n     *\n     * @export\n     * @param {any} string the transform attribute string ie. transform(x,y)\n     * @returns Returns an object with x and y offsets of the transform\n     */\n    function getTranformOffsets(string) {\n        var regExp = /\\(([^)]+)\\)/;\n        var match = regExp.exec(string)[1];\n        var xyString = match.split(\",\");\n        return {\n            x: parseFloat(xyString[0]),\n            y: parseFloat(xyString[1])\n        };\n    }\n    Tools.getTranformOffsets = getTranformOffsets;\n    /**\n     * Returns string value for height/width using pixels if there isn't a specified unit of measure\n     *\n     * @param value string or number value to be checked for unit of measure\n     */\n    function formatWidthHeightValues(value) {\n        var stringValue = value.toString();\n        // If the value provided contains any letters\n        // Return it the same way\n        if (stringValue.match(/[a-z]/i)) {\n            return stringValue;\n        }\n        return stringValue + \"px\";\n    }\n    Tools.formatWidthHeightValues = formatWidthHeightValues;\n    /**\n     * Capitalizes first letter of a string\n     *\n     * @export\n     * @param {any} string the input string to perform first letter capitalization with\n     * @returns The transformed string after first letter is capitalized\n     */\n    function capitalizeFirstLetter(string) {\n        return string[0].toUpperCase() + string.slice(1);\n    }\n    Tools.capitalizeFirstLetter = capitalizeFirstLetter;\n    /**\n     * Get the percentage of a datapoint compared to the entire dataset.\n     * @export\n     * @param {any} item\n     * @param {any} fullData\n     * @returns The percentage in the form of a number (1 significant digit if necessary)\n     */\n    function convertValueToPercentage(item, fullData) {\n        var percentage = (item / fullData.reduce(function (accum, val) { return accum + val.value; }, 0)) *\n            100;\n        // if the value has any significant figures, keep 1\n        return percentage % 1 !== 0\n            ? parseFloat(percentage.toFixed(1))\n            : percentage;\n    }\n    Tools.convertValueToPercentage = convertValueToPercentage;\n    /**\n     * Truncate the labels\n     * @export\n     * @param {any} fullText\n     * @param {any} truncationType\n     * @param {any} numCharacter\n     * @returns Truncated text\n     */\n    function truncateLabel(fullText, truncationType, numCharacter) {\n        if (numCharacter > fullText.length) {\n            return fullText;\n        }\n        if (truncationType === TruncationTypes.MID_LINE) {\n            return (fullText.substr(0, numCharacter / 2) +\n                \"...\" +\n                fullText.substr(-numCharacter / 2));\n        }\n        else if (truncationType === TruncationTypes.FRONT_LINE) {\n            return \"...\" + fullText.substr(-numCharacter);\n        }\n        else if (truncationType === TruncationTypes.END_LINE) {\n            return fullText.substr(0, numCharacter) + \"...\";\n        }\n    }\n    Tools.truncateLabel = truncateLabel;\n    /**************************************\n     *  Object/array related checks       *\n     *************************************/\n    /**\n     * Compares two arrays to return the difference between two arrays' items.\n     *\n     * @export\n     * @param {any[]} oldArray the array to check for missing items\n     * @param {any[]} newArray the array to check for newly added items\n     * @returns An object containing items missing (existing in oldArray but not newArray)\n     * and items added (existing in newArray but not in oldArray). Object is of the form { missing: [], added: [] }\n     */\n    function arrayDifferences(oldArray, newArray) {\n        var difference = {\n            missing: [],\n            added: []\n        };\n        oldArray.forEach(function (element) {\n            if (newArray.indexOf(element) === -1) {\n                difference.missing.push(element);\n            }\n        });\n        newArray.forEach(function (element) {\n            if (oldArray.indexOf(element) === -1) {\n                difference.added.push(element);\n            }\n        });\n        return difference;\n    }\n    Tools.arrayDifferences = arrayDifferences;\n    /**\n     * Gets the duplicated keys from an array of data\n     *\n     * @export\n     * @param {*} data - array of data\n     * @returns A list of the duplicated keys in data\n     */\n    function getDuplicateValues(arr) {\n        var values = [];\n        var duplicateValues = [];\n        arr.forEach(function (value) {\n            if (values.indexOf(value) !== -1 &&\n                duplicateValues.indexOf(value) === -1) {\n                duplicateValues.push(value);\n            }\n            values.push(value);\n        });\n        return duplicateValues;\n    }\n    Tools.getDuplicateValues = getDuplicateValues;\n    // ================================================================================\n    // D3 Extensions\n    // ================================================================================\n    /**\n     * In D3, moves an element to the front of the canvas\n     *\n     * @export\n     * @param {any} element input element to moved in front\n     * @returns The function to be used by D3 to push element to the top of the canvas\n     */\n    function moveToFront(element) {\n        return element.each(function () {\n            this.parentNode.appendChild(this);\n        });\n    }\n    Tools.moveToFront = moveToFront;\n    // ================================================================================\n    // Style Helpers\n    // ================================================================================\n    /**\n     * Gets a speicified property from within an object.\n     *\n     * @param object the object containing the property to retrieve\n     * @param propPath nested properties used to extract the final property from within the object\n     * (i.e \"style\", \"color\" would retrieve the color property from within an object that has \"color\" nested within \"style\")\n     */\n    Tools.getProperty = function (object) {\n        var propPath = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            propPath[_i - 1] = arguments[_i];\n        }\n        var position = object;\n        if (position) {\n            for (var _a = 0, propPath_1 = propPath; _a < propPath_1.length; _a++) {\n                var prop = propPath_1[_a];\n                if (position[prop] !== null && position[prop] !== undefined) {\n                    position = position[prop];\n                }\n                else {\n                    return null;\n                }\n            }\n            return position;\n        }\n        return null;\n    };\n    Tools.flipSVGCoordinatesBasedOnOrientation = function (verticalCoordinates, orientation) {\n        if (orientation === CartesianOrientations.HORIZONTAL) {\n            return {\n                y0: verticalCoordinates.x0,\n                y1: verticalCoordinates.x1,\n                x0: verticalCoordinates.y0,\n                x1: verticalCoordinates.y1\n            };\n        }\n        return verticalCoordinates;\n    };\n    Tools.generateSVGPathString = function (verticalCoordinates, orientation) {\n        var _a = Tools.flipSVGCoordinatesBasedOnOrientation(verticalCoordinates, orientation), x0 = _a.x0, x1 = _a.x1, y0 = _a.y0, y1 = _a.y1;\n        return \"M\" + x0 + \",\" + y0 + \"L\" + x0 + \",\" + y1 + \"L\" + x1 + \",\" + y1 + \"L\" + x1 + \",\" + y0 + \"L\" + x0 + \",\" + y0;\n    };\n    function flipDomainAndRangeBasedOnOrientation(domain, range, orientation) {\n        return orientation === CartesianOrientations.VERTICAL\n            ? [domain, range]\n            : [range, domain];\n    }\n    Tools.flipDomainAndRangeBasedOnOrientation = flipDomainAndRangeBasedOnOrientation;\n    Tools.compareNumeric = function (a, b) {\n        return Number(a) === Number(b);\n    };\n})(Tools || (Tools = {}));\n//# sourceMappingURL=../src/tools.js.map"]},"metadata":{},"sourceType":"module"}